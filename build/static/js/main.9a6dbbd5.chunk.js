(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var a,r,c,s=n(0),o=n(23),i=n.n(o),l=(n(91),n(92),n(43)),d=n(7),u=n(134),j=n(126),p=n(136),b=n(127),O=n(9),f=n.n(O),h=n(17),x=n(18),m=n.n(x),g=n(74),v=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t,n){var a,r,c,s,o,i,l,d,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=a.user.userInfo,c=Object(g.a)(r.access,{complete:!0}),s=Object(g.a)(r.refresh,{complete:!0}),o=new Date,!(1e3*c.exp<o.getTime())){e.next=21;break}if(console.log("Access Token expired."),!(1e3*s.exp>o.getTime())){e.next=18;break}return i={headers:{"Content-Type":"application/json"}},l={refresh:r.refresh},e.next=11,m.a.post("/user/token/refresh/",l,i);case 11:d=e.sent,u=d.data,r.refresh=u.refresh,r.access=u.access,localStorage.setItem("userInfo",JSON.stringify(r)),e.next=19;break;case 18:console.log("Refresh token is expired");case 19:e.next=22;break;case 21:console.log("Valid token");case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},y="USER_REQUEST",_="USER_SUCCESS",k="USER_FAIL",w="USER_LOGOUT",I="USER_DETAILS_REQUEST",C="USER_DETAILS_SUCCESS",S="USER_DETAILS_FAIL",E="USER_DETAILS_RESET",L="USER_PROFILE_UPDATE_REQUEST",T="USER_PROFILE_UPDATE_SUCCESS",D="USER_PROFILE_UPDATE_FAIL",N="USER_PROFILE_UPDATE_RESET",P=n(1),R=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.user})).userInfo;return Object(P.jsx)("header",{children:Object(P.jsx)(u.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(P.jsxs)(j.a,{fluid:!0,children:[Object(P.jsx)(l.LinkContainer,{to:"/",children:Object(P.jsx)(u.a.Brand,{children:"Rope"})}),Object(P.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(P.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(P.jsxs)(p.a,{className:"mr-auto",children:[Object(P.jsx)(l.LinkContainer,{to:"/",className:"mr-auto",children:Object(P.jsx)(p.a.Link,{children:"Home"})}),t?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.LinkContainer,{to:"/board",children:Object(P.jsx)(p.a.Link,{children:"Board"})}),Object(P.jsxs)(b.a,{title:t.first_name+" "+t.last_name,id:"username",children:[Object(P.jsx)(l.LinkContainer,{to:"/profile",children:Object(P.jsx)(b.a.Item,{children:"Profile"})}),Object(P.jsx)(b.a.Item,{onClick:function(){e(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(v()),localStorage.removeItem("userInfo"),t({type:w}),t({type:E});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.LinkContainer,{to:"/login",children:Object(P.jsx)(p.a.Link,{children:"Login"})}),Object(P.jsx)(l.LinkContainer,{to:"/register",children:Object(P.jsx)(p.a.Link,{children:"Register"})})]})]})})]})})})},U=n(128),F=n(85),G=function(){return Object(P.jsx)("footer",{children:Object(P.jsx)(j.a,{children:Object(P.jsx)(U.a,{children:Object(P.jsx)(F.a,{className:"text-center py-3",children:"Copyright \xa9 Rope"})})})})},A=function(e){return Object(P.jsxs)("div",{children:[Object(P.jsx)(R,{}),e.children,Object(P.jsx)(G,{})]})},B=n(40),q=n(15),J=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.user})),n=(t.error,t.loading,t.userInfo);return Object(s.useEffect)((function(){n&&e(v())}),[n]),Object(P.jsx)(j.a,{className:"mt-3",children:Object(P.jsx)("h1",{children:"Home"})})},K=n(129),H=function(){return Object(P.jsx)(K.a,{animation:"border",role:"status",style:{position:"absolute",height:"200px",width:"200px",top:"45%",left:"45%",display:"block"},children:Object(P.jsx)("span",{className:"sr-only"})})},W=n(8),V=n(10),z=n(20),M=n(84),Q=n(132),X=n(133),Y=n(66),Z=n(64),$=n(21),ee=Object($.a)("columns/fetchColumns",Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/columns/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),te=Object($.b)({selectId:function(e){return e.id}}),ne=Object($.c)({name:"columns",initialState:te.getInitialState({loading:!1}),reducers:{},extraReducers:(a={},Object(W.a)(a,ee.pending,(function(e){e.loading=!0})),Object(W.a)(a,ee.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,te.setAll(e,n)})),Object(W.a)(a,ee.rejected,(function(e){e.loading=!1})),a)}),ae=te.getSelectors((function(e){return e.columns})),re=ne.reducer,ce=Object($.a)("workpackages/fetchWorkpackages",Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/workpackages/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),se=Object($.a)("workpackages/createWorkpackage",function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a,r,c,s,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.procedure,r=t.planned_start_date,c=t.planned_end_date,s=t.planned_efforts,o={title:n,procedure:a,planned_start_date:r,planned_end_date:c,planned_efforts:s,project_lead_column:1},e.next=4,m.a.put("/api/workpackages-create/",o);case 4:return i=e.sent,l=i.data,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe=Object($.a)("workpackages/updateWorkpackage",function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a,r,c,s,o,i,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.title,r=t.procedure,c=t.planned_start_date,s=t.planned_end_date,o=t.planned_efforts,i={id:n,title:a,procedure:r,planned_start_date:c,planned_end_date:s,planned_efforts:o},e.next=4,m.a.put("/api/workpackages-update/",i);case 4:return l=e.sent,d=l.data,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object($.a)("workpackages/updateColumn",function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.columnId,a=t.data,r={columnId:n,order:a},m.a.put("/api/workpackages-order-update/",r),e.abrupt("return",{id:n,data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object($.a)("workpackages/updateBetweenColumns",function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a,r,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.start,a=t.startTasks,r=t.finish,c=t.finishTasks,s=t.draggableId,o={columnId:r,workpackageId:s,order:c},m.a.put("/api/workpackages-column-update/",o),e.abrupt("return",{start:n,startTasks:a,finish:r,finishTasks:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),de=Object($.b)({selectId:function(e){return e.id}}),ue=Object($.c)({name:"workpackages",initialState:{},reducers:{},extraReducers:(r={},Object(W.a)(r,ee.fulfilled,(function(e,t){var n,a=t.payload,r={},c=Object(Z.a)(a);try{for(c.s();!(n=c.n()).done;){var s=n.value;r[s.id]=s.lead_column}}catch(o){c.e(o)}finally{c.f()}e.byColumns=r})),Object(W.a)(r,ce.pending,(function(e){e.loading=!0})),Object(W.a)(r,ce.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,de.setAll(e,n)})),Object(W.a)(r,ce.rejected,(function(e){e.loading=!1})),Object(W.a)(r,se.pending,(function(e){e.loading=!0})),Object(W.a)(r,se.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,de.addOne(e,n),e.byColumns[n.project_lead_column]=[].concat(Object(Y.a)(e.byColumns[n.project_lead_column]),[n.id])})),Object(W.a)(r,se.rejected,(function(e){e.loading=!1})),Object(W.a)(r,oe.pending,(function(e){e.loading=!0})),Object(W.a)(r,oe.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,de.updateOne(e,{id:n.id,changes:n})})),Object(W.a)(r,oe.rejected,(function(e){e.loading=!1})),Object(W.a)(r,ie.pending,(function(e){e.loading=!0})),Object(W.a)(r,ie.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.byColumns[n.id]=n.data})),Object(W.a)(r,le.pending,(function(e){e.loading=!0})),Object(W.a)(r,le.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.byColumns[n.start]=n.startTasks,e.byColumns[n.finish]=n.finishTasks})),r)}).reducer,je=function(){var e=Object(d.d)((function(e){return e.workpackages.loading})),t=Object(s.useState)(!1),n=Object(z.a)(t,2),a=n[0],r=n[1],c=function(){return r(!1)},o=Object(d.c)(),i=Object(s.useState)({title:"",procedure:"",planned_start_date:"",planned_end_date:"",planned_efforts:""}),l=Object(z.a)(i,2),u=l[0],p=l[1],b=u.title,O=u.procedure,f=u.planned_start_date,h=u.planned_end_date,x=u.planned_efforts,m=function(e){p(Object(V.a)(Object(V.a)({},u),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"d-grid gap-2",style:{maxWidth:"200px"},children:Object(P.jsxs)(M.a,{className:"p-1",variant:"outline-dark",style:{borderStyle:"dashed",borderRadius:"20px"},onClick:function(){return r(!0)},children:["Add card ",Object(P.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})]})}),Object(P.jsxs)(Q.a,{show:a,onHide:c,backdrop:"static",keyboard:!1,size:"lg",children:[Object(P.jsx)(Q.a.Header,{closeButton:!0,children:Object(P.jsx)(Q.a.Title,{children:"New Card"})}),Object(P.jsx)(Q.a.Body,{children:Object(P.jsxs)(j.a,{className:"px-5",children:[e?Object(P.jsx)(H,{}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),o(se({title:b,procedure:O,planned_start_date:f,planned_end_date:h,planned_efforts:x}))},children:[Object(P.jsxs)(X.a.Group,{controlId:"title",children:[Object(P.jsx)(X.a.Label,{children:"Title"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"title",value:b,name:"title",onChange:function(e){return m(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"procedure",children:[Object(P.jsx)(X.a.Label,{children:"Procedure"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"procedure",value:O,name:"procedure",onChange:function(e){return m(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_start_date",children:[Object(P.jsx)(X.a.Label,{children:"Planned Start Date"}),Object(P.jsx)(X.a.Control,{type:"date",required:!0,placeholder:"Email",value:f,name:"planned_start_date",onChange:function(e){return m(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_end_date",children:[Object(P.jsx)(X.a.Label,{children:"Planned End Date"}),Object(P.jsx)(X.a.Control,{type:"date",placeholder:"New Password",value:h,name:"planned_end_date",onChange:function(e){return m(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_efforts",children:[Object(P.jsx)(X.a.Label,{children:"Planned Efforts"}),Object(P.jsx)(X.a.Control,{type:"number",min:"1",required:!0,placeholder:"planned_efforts",value:x,name:"planned_efforts",onChange:function(e){return m(e)}})]}),Object(P.jsx)(M.a,{type:"submit",onClick:c,variant:"primary",className:"my-2",children:"Save"})]})]})}),Object(P.jsx)(Q.a.Footer,{children:Object(P.jsx)(M.a,{variant:"secondary",onClick:c,children:"Close"})})]})]})},pe=n(47),be=Object($.a)("documents/fetchDocuments",Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/documents/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),Oe=Object($.a)("documents/fileUpload",function(){var e=Object(h.a)(f.a.mark((function e(t,n){var a,r,c,s,o,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,r=t.description,c=t.taskId,s=n.dispatch,(o=new FormData).append("file",a),o.append("description",r),o.append("workpackage",c),e.next=8,m.a.post("/api/document-upload/",o,{onUploadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");null!==t&&s(xe(Math.round(100*e.loaded/t)))}});case 8:return i=e.sent,l=i.data,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),fe=Object($.b)({selectId:function(e){return e.id}}),he=Object($.c)({name:"documents",initialState:fe.getInitialState({loading:!1,processDetail:0}),reducers:{progressBarValue:function(e,t){var n=t.payload;e.processDetail=n}},extraReducers:(c={},Object(W.a)(c,ce.fulfilled,(function(e,t){var n,a=t.payload,r={},c=Object(Z.a)(a);try{for(c.s();!(n=c.n()).done;){var s=n.value;r[s.id]=s.documents}}catch(o){c.e(o)}finally{c.f()}e.byTasks=r})),Object(W.a)(c,oe.fulfilled,(function(e,t){var n=t.payload;e.byTasks[n.id]=[]})),Object(W.a)(c,be.pending,(function(e){e.loading=!0})),Object(W.a)(c,be.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,fe.setAll(e,n)})),Object(W.a)(c,be.rejected,(function(e){e.loading=!1})),Object(W.a)(c,Oe.pending,(function(e){e.loading=!0})),Object(W.a)(c,Oe.fulfilled,(function(e,t){var n=t.payload;e.loading=!1,e.processDetail=0,fe.addOne(e,n),null==e.byTasks[n.workpackage]&&(e.byTasks[n.workpackage]=[]),e.byTasks[n.workpackage]=[].concat(Object(Y.a)(e.byTasks[n.workpackage]),[n.id])})),Object(W.a)(c,Oe.rejected,(function(e){e.loading=!1,e.processDetail=0})),c)}),xe=(fe.getSelectors((function(e){return e.columns})),he.actions.progressBarValue),me=he.reducer,ge=n(137),ve=n(38),ye=function(e){var t=e.task,n=e.index;return Object(P.jsx)(pe.b,{draggableId:""+t.id,index:n,children:function(e,n){return Object(P.jsx)(ge.a,Object(V.a)(Object(V.a)(Object(V.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,style:Object(V.a)({display:"flex",userSelect:"none",borderRadius:6,margin:"0 0 8px 0",minHeight:"0px",backgroundColor:n.isDragging?"#3c7a89":"#2e4756"},e.draggableProps.style),children:Object(P.jsxs)(U.a,{children:[Object(P.jsx)(F.a,{style:{minWidth:"80%"},children:Object(P.jsxs)(ge.a.Body,{children:[Object(P.jsx)(ge.a.Title,{style:{color:"white"},children:t.title}),Object(P.jsxs)(ge.a.Subtitle,{className:"mb-2 text-muted",children:["Due Date: ",t.planned_end_date]}),Object(P.jsxs)(ge.a.Text,{style:{color:"white"},children:["Procedure: ",t.procedure]})]})}),Object(P.jsx)(F.a,{style:{minWidth:"20%"},children:Object(P.jsxs)(ve.a,{children:[Object(P.jsx)(ve.a.Toggle,{style:{background:"transparent",boxShadow:"none",paddingTop:0,paddingBottom:0}}),Object(P.jsxs)(ve.a.Menu,{children:[Object(P.jsx)(ve.a.Item,{as:B.Link,to:{pathname:"/card/".concat(t.id)},children:"View"}),Object(P.jsx)(ve.a.Item,{children:"Delete"})]})]})})]})}))}})},_e=function(e){var t=e.columnId,n=e.title,a=e.tasks;return Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:n}),Object(P.jsx)(pe.c,{droppableId:""+t,children:function(e,t){return Object(P.jsxs)(F.a,Object(V.a)(Object(V.a)({ref:e.innerRef},e.droppableProps),{},{style:{background:t.isDraggingOver?"#B8DBD9":"white",padding:4,minWidth:200,maxWidth:350,width:400,minHeight:300},children:[a.map((function(e,t){return Object(P.jsx)(ye,{task:e,index:t},e.id)})),e.placeholder]}))}})]})},ke=Object(s.memo)(_e),we=function(){var e=Object(d.c)();Object(s.useEffect)((function(){e(ee()),e(ce()),e(be())}),[e]);var t=Object(d.d)(ae.selectIds),n=Object(d.d)(ae.selectEntities),a=Object(d.d)((function(e){return e.columns.loading})),r=Object(d.d)((function(e){return e.workpackages.entities})),c=Object(d.d)((function(e){return e.workpackages.byColumns}));return Object(P.jsxs)(P.Fragment,{children:[a?Object(P.jsx)(H,{}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(j.a,{fluid:!0,className:"mt-3",children:[Object(P.jsx)("h1",{children:"Kanban Board"}),Object(P.jsx)("hr",{})]}),Object(P.jsx)(j.a,{children:Object(P.jsx)(je,{})}),Object(P.jsx)(j.a,{className:"mt-3",style:{display:"flex",justifyContent:"space-around"},children:Object(P.jsx)(pe.a,{onDragEnd:function(t){var n=t.destination,a=t.source,r=t.draggableId;if(n&&(n.droppableId!==a.draggableId||n.index!==a.index)){var s=a.droppableId,o=n.droppableId;if(s===o){var i=Array.from(c[a.droppableId]);if(i.splice(a.index,1),i.splice(n.index,0,r),i.join(",")===c[a.droppableId].join(","))return;e(ie({columnId:a.droppableId,data:i}))}else if(s!==o){var l=Array.from(c[a.droppableId]);l.splice(a.index,1);var d=Array.from(c[n.droppableId]);d.splice(n.index,0,r),e(le({start:s,startTasks:l,finish:o,finishTasks:d,draggableId:r}))}}},children:n&&r?t.map((function(e){var t=c[e].map((function(e){return r[e]}));return Object(P.jsx)(ke,{columnId:e,title:n[e].title,tasks:t},e)})):Object(P.jsx)(P.Fragment,{children:"No Columns"})})})]})},Ie=function(e){return Object(P.jsx)(j.a,{className:"py-5",children:Object(P.jsx)(U.a,{className:"justify-content-md-center",children:Object(P.jsx)(F.a,{xs:12,md:6,children:e.children})})})},Ce=n(130),Se=function(e){var t=e.variant,n=e.children;return Object(P.jsx)(Ce.a,{variant:t,children:n})},Ee=function(e){var t=e.location,n=e.history,a=t.search?t.search.split("=")[1]:"/",r=Object(d.d)((function(e){return e.user})),c=r.error,o=r.loading,i=r.userInfo;Object(s.useEffect)((function(){i&&n.push(a)}),[n,i,a]);var l=Object(d.c)(),u=Object(s.useState)({email:"",password:""}),j=Object(z.a)(u,2),p=j[0],b=j[1],O=p.email,x=p.password,g=function(e){return b(Object(V.a)(Object(V.a)({},p),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(Ie,{children:[Object(P.jsx)("h1",{children:"Sign In"}),o?Object(P.jsx)(H,{}):c?Object(P.jsx)(Se,{variant:"danger",children:c}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),l(function(e,t){return function(){var n=Object(h.a)(f.a.mark((function n(a){var r,c,s,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:y}),r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.next=6,m.a.post("/user/login/",c,r);case 6:s=n.sent,o=s.data,a({type:_,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),n.next=19;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0.reponse),console.log(n.t0.response.data.details),console.log(n.t0.response.data.detail),console.log(n.t0.message),a({type:k,payload:n.t0.reponse&&n.t0.response.data.details?n.t0.message:n.t0.response.data.detail});case 19:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(O,x))},children:[Object(P.jsxs)(X.a.Group,{controlId:"email",children:[Object(P.jsx)(X.a.Label,{children:"Email"}),Object(P.jsx)(X.a.Control,{type:"email",placeholder:"Email",value:O,name:"email",onChange:function(e){return g(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"password",children:[Object(P.jsx)(X.a.Label,{children:"Password"}),Object(P.jsx)(X.a.Control,{type:"password",placeholder:"Password",value:x,name:"password",onChange:function(e){return g(e)}})]}),Object(P.jsx)(M.a,{type:"submit",variant:"primary",className:"my-2",children:"Sign In"})]})]})})},Le=function(e){var t=e.location,n=e.history,a=t.search?t.search.split("=")[1]:"/",r=Object(d.d)((function(e){return e.user})),c=r.error,o=r.loading,i=r.userInfo;Object(s.useEffect)((function(){i&&n.push(a)}),[n,i,a]);var l=Object(d.c)(),u=Object(s.useState)({first_name:"",last_name:"",email:"",password:""}),j=Object(z.a)(u,2),p=j[0],b=j[1],O=p.first_name,x=p.last_name,g=p.email,v=p.password,w=function(e){return b(Object(V.a)(Object(V.a)({},p),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(Ie,{children:[Object(P.jsx)("h1",{children:"Sign In"}),o?Object(P.jsx)(H,{}):c?Object(P.jsx)(Se,{variant:"danger",children:c}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),l(function(e,t,n,a){return function(){var r=Object(h.a)(f.a.mark((function r(c){var s,o,i,l;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:y}),s={headers:{"Content-Type":"application/json"}},o=JSON.stringify({first_name:e,last_name:t,email:n,password:a}),r.next=6,m.a.post("/user/register/",o,s);case 6:i=r.sent,l=i.data,c({type:_,payload:l}),localStorage.setItem("userInfo",JSON.stringify(l)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),c({type:k,payload:r.t0.reponse&&r.t0.response.data.details?r.t0.response.data.detail:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()}(O,x,g,v))},children:[Object(P.jsxs)(X.a.Group,{controlId:"first_name",children:[Object(P.jsx)(X.a.Label,{children:"first_name"}),Object(P.jsx)(X.a.Control,{type:"text",placeholder:"first_name",value:O,name:"first_name",onChange:function(e){return w(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"last_name",children:[Object(P.jsx)(X.a.Label,{children:"last_name"}),Object(P.jsx)(X.a.Control,{type:"text",placeholder:"last_name",value:x,name:"last_name",onChange:function(e){return w(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"email",children:[Object(P.jsx)(X.a.Label,{children:"Email"}),Object(P.jsx)(X.a.Control,{type:"email",placeholder:"Email",value:g,name:"email",onChange:function(e){return w(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"password",children:[Object(P.jsx)(X.a.Label,{children:"Password"}),Object(P.jsx)(X.a.Control,{type:"password",placeholder:"Password",value:v,name:"password",onChange:function(e){return w(e)}})]}),Object(P.jsx)(M.a,{type:"submit",variant:"primary",className:"my-2",children:"Sign In"})]})]})})},Te=function(e){var t=e.location,n=e.history,a=t.search?t.search.split("=")[1]:"/",r=Object(d.c)(),c=Object(s.useState)({first_name:"",last_name:"",email:"",password:""}),o=Object(z.a)(c,2),i=o[0],l=o[1],u=i.first_name,j=i.last_name,p=i.email,b=i.password,O=function(e){return l(Object(V.a)(Object(V.a)({},i),{},Object(W.a)({},e.target.name,e.target.value)))},x=Object(d.d)((function(e){return e.user})).userInfo,g=Object(d.d)((function(e){return e.userDetails})),v=g.error,y=g.user,k=Object(d.d)((function(e){return e.userProfileUpdate})),w=k.loading,E=k.success,R=k.updateError;return Object(s.useEffect)((function(){var e;x?!y||E?(r({type:N}),r(function(){var e=Object(h.a)(f.a.mark((function e(t,n){var a,r,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:I}),a=n(),r=a.user.userInfo,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.access)}},e.next=6,m.a.get("/user/user-details/",c);case 6:s=e.sent,o=s.data,t({type:C,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:S,payload:e.t0.reponse&&e.t0.response.data.details?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}())):l(Object(V.a)(Object(V.a)({},i),{},(e={},Object(W.a)(e,"first_name",y.first_name),Object(W.a)(e,"last_name",y.last_name),Object(W.a)(e,"email",y.email),e))):n.push("/login")}),[n,y,x,a,E]),Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(Ie,{children:[Object(P.jsx)("h1",{children:"Sign In"}),w?Object(P.jsx)(H,{}):R?Object(P.jsx)(Se,{variant:"danger",children:R}):v?Object(P.jsx)(Se,{variant:"danger",children:v}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),r(function(e,t,n,a){return function(){var r=Object(h.a)(f.a.mark((function r(c,s){var o,i,l,d,u,j;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:L}),o=s(),i=o.user.userInfo,console.log(i.access),l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i.access)}},d=JSON.stringify({first_name:e,last_name:t,email:n,password:a}),r.next=8,m.a.put("/user/update/",d,l);case 8:u=r.sent,j=u.data,c({type:T,payload:j}),c({type:_,payload:j}),localStorage.setItem("userInfo",JSON.stringify(j)),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),c({type:D,payload:r.t0.reponse&&r.t0.response.data.details?r.t0.response.data.detail:r.t0.message});case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}()}(u,j,p,b))},children:[Object(P.jsxs)(X.a.Group,{controlId:"first_name",children:[Object(P.jsx)(X.a.Label,{children:"First Name"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"first_name",value:u,name:"first_name",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"last_name",children:[Object(P.jsx)(X.a.Label,{children:"Last Name"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"last_name",value:j,name:"last_name",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"email",children:[Object(P.jsx)(X.a.Label,{children:"Email"}),Object(P.jsx)(X.a.Control,{type:"email",required:!0,placeholder:"Email",value:p,name:"email",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"password",children:[Object(P.jsx)(X.a.Label,{children:"New Password"}),Object(P.jsx)(X.a.Control,{type:"password",placeholder:"New Password",value:b,name:"password",onChange:function(e){return O(e)}})]}),Object(P.jsx)(M.a,{type:"submit",variant:"primary",className:"my-2",children:"update"})]})]})})},De=n(135),Ne=n(138),Pe=function(e){var t=e.taskId,n=Object(d.d)((function(e){return e.documents.processDetail})),a=Object(d.d)((function(e){return e.documents.loading})),r=Object(d.c)(),c=Object(s.useState)(),o=Object(z.a)(c,2),i=o[0],l=o[1],u=Object(s.useState)({description:""}),j=Object(z.a)(u,2),p=j[0],b=j[1],O=p.description;return Object(P.jsxs)("div",{children:[a?Object(P.jsx)(H,{}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),r(Oe({file:i,description:O,taskId:t}))},style:{width:"70%"},children:[Object(P.jsxs)(X.a.Group,{controlId:"description",children:[Object(P.jsx)(X.a.Label,{children:"Description"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"description",value:O,name:"description",onChange:function(e){return function(e){return b(Object(V.a)(Object(V.a)({},p),{},Object(W.a)({},e.target.name,e.target.value)))}(e)}})]}),Object(P.jsx)("br",{}),Object(P.jsxs)(X.a.Group,{children:[Object(P.jsx)(X.a.Label,{children:"File"}),Object(P.jsx)("br",{}),Object(P.jsx)(X.a.Control,{type:"file",required:!0,name:"file",onChange:function(e){return function(e){l(e.target.files[0])}(e)}})]}),Object(P.jsx)("br",{}),Object(P.jsx)(M.a,{type:"submit",variant:"primary",className:"my-2",children:"Upload"})]}),n?Object(P.jsx)(Ne.a,{animated:!0,now:n,label:"".concat(n,"%")}):Object(P.jsx)(P.Fragment,{})]})},Re=n(131),Ue=function(e){var t=e.taskId,n=Object(d.d)((function(e){return e.documents.entities})),a=Object(d.d)((function(e){return e.documents.byTasks[t]})),r=Object(s.useState)(n),c=Object(z.a)(r,2),o=c[0],i=c[1],l=Object(s.useState)(a),u=Object(z.a)(l,2),j=u[0],p=u[1];return Object(s.useEffect)((function(){i(n),p(a)}),[n,a]),Object(P.jsxs)(Re.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,size:"sm",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:Object(P.jsx)("h5",{children:"Description"})}),Object(P.jsx)("th",{children:Object(P.jsx)("h5",{children:"URL"})})]})}),Object(P.jsx)("tbody",{children:o&&j?j.map((function(e){var t=o[e];return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t.description}),Object(P.jsx)("td",{style:{overflowX:"scroll",overflowY:"scroll"},children:Object(P.jsx)("a",{href:t.file,target:"_blank",children:t.file})})]},t.id)})):Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"No Documents"}),Object(P.jsx)("td",{style:{overflowX:"scroll",overflowY:"scroll"},children:"-"})]})})})]})},Fe=function(e){var t=e.task;return Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{children:["Title: ",t.title]}),Object(P.jsxs)("div",{children:["Procedure: ",t.procedure]}),Object(P.jsxs)("div",{children:["Planned Start Date: ",t.planned_start_date]}),Object(P.jsxs)("div",{children:["Planned End Date: ",t.planned_end_date]}),Object(P.jsxs)("div",{children:["Planned Efforts: ",t.planned_efforts]})]})},Ge=function(e){var t=e.task,n=Object(d.d)((function(e){return e.workpackages.loading})),a=Object(d.c)(),r=Object(s.useState)({title:t.title,procedure:t.procedure,planned_start_date:t.planned_start_date,planned_end_date:t.planned_end_date,planned_efforts:t.planned_efforts}),c=Object(z.a)(r,2),o=c[0],i=c[1],l=o.title,u=o.procedure,j=o.planned_start_date,p=o.planned_end_date,b=o.planned_efforts,O=function(e){i(Object(V.a)(Object(V.a)({},o),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(P.jsxs)("div",{children:[n?Object(P.jsx)(H,{}):Object(P.jsx)(P.Fragment,{}),Object(P.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),a(oe({id:t.id,title:l,procedure:u,planned_start_date:j,planned_end_date:p,planned_efforts:b}))},children:[Object(P.jsxs)(X.a.Group,{controlId:"title",children:[Object(P.jsx)(X.a.Label,{children:"Title"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"title",value:l,name:"title",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"procedure",children:[Object(P.jsx)(X.a.Label,{children:"Procedure"}),Object(P.jsx)(X.a.Control,{type:"text",required:!0,placeholder:"procedure",value:u,name:"procedure",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_start_date",children:[Object(P.jsx)(X.a.Label,{children:"Planned Start Date"}),Object(P.jsx)(X.a.Control,{type:"date",required:!0,placeholder:"Email",value:j,name:"planned_start_date",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_end_date",children:[Object(P.jsx)(X.a.Label,{children:"Planned End Date"}),Object(P.jsx)(X.a.Control,{type:"date",placeholder:"New Password",value:p,name:"planned_end_date",onChange:function(e){return O(e)}})]}),Object(P.jsxs)(X.a.Group,{controlId:"planned_efforts",children:[Object(P.jsx)(X.a.Label,{children:"Planned Efforts"}),Object(P.jsx)(X.a.Control,{type:"number",min:"1",required:!0,placeholder:"planned_efforts",value:b,name:"planned_efforts",onChange:function(e){return O(e)}})]}),Object(P.jsx)(M.a,{type:"submit",variant:"primary",className:"my-2",children:"update"})]})]})},Ae=function(e){var t=e.task;return Object(P.jsx)(De.a.Container,{defaultActiveKey:"view",children:Object(P.jsxs)(U.a,{children:[Object(P.jsx)(F.a,{sm:3,children:Object(P.jsxs)(p.a,{variant:"pills",className:"flex-column",children:[Object(P.jsx)(p.a.Item,{children:Object(P.jsx)(p.a.Link,{eventKey:"view",children:"View"})}),Object(P.jsx)(p.a.Item,{children:Object(P.jsx)(p.a.Link,{eventKey:"edit",children:"Edit"})}),Object(P.jsx)(p.a.Item,{children:Object(P.jsx)(p.a.Link,{eventKey:"documents",children:"Documents"})}),Object(P.jsx)(p.a.Item,{children:Object(P.jsx)(p.a.Link,{eventKey:"documentsUpload",children:"Upload Documents"})})]})}),Object(P.jsx)(F.a,{sm:9,children:Object(P.jsxs)(De.a.Content,{children:[Object(P.jsx)(De.a.Pane,{eventKey:"view",children:Object(P.jsx)(Fe,{task:t})}),Object(P.jsx)(De.a.Pane,{eventKey:"edit",children:Object(P.jsx)(Ge,{task:t})}),Object(P.jsx)(De.a.Pane,{eventKey:"documents",children:Object(P.jsx)(Ue,{taskId:t.id})}),Object(P.jsx)(De.a.Pane,{eventKey:"documentsUpload",children:Object(P.jsx)(Pe,{taskId:t.id})})]})})]})})},Be=function(){var e=Object(q.m)().taskId,t=Object(d.d)((function(t){return t.workpackages.entities[e]}));return Object(P.jsx)(j.a,{className:"mt-4",children:Object(P.jsx)(U.a,{className:"d-flex",children:Object(P.jsx)(Ae,{task:t})})})},qe=function(){return Object(P.jsx)("div",{children:Object(P.jsx)(B.BrowserRouter,{children:Object(P.jsx)(A,{children:Object(P.jsx)("div",{className:"main",children:Object(P.jsxs)(q.g,{children:[Object(P.jsx)(q.d,{path:"/",exact:!0,component:J}),Object(P.jsx)(q.d,{path:"/board",exact:!0,component:we}),Object(P.jsx)(q.d,{path:"/login",exact:!0,component:Ee}),Object(P.jsx)(q.d,{path:"/register",exact:!0,component:Le}),Object(P.jsx)(q.d,{path:"/profile",exact:!0,component:Te}),Object(P.jsx)(q.d,{path:"/card/:taskId",exact:!0,component:Be})]})})})})})},Je=n(16),Ke=n(86),He=n(54),We=Object(Je.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loading:!0};case _:return{loading:!1,userInfo:t.payload};case k:return{loading:!1,error:t.payload};case w:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(V.a)(Object(V.a)({},e),{},{loading:!0});case C:return{loading:!1,user:t.payload};case S:return{loading:!1,error:t.payload};case E:return{};default:return e}},userProfileUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loading:!0};case T:return{loading:!1,success:!0,userInfo:t.payload};case D:return{loading:!1,updateError:t.payload};case N:return{};default:return e}},columns:re,workpackages:ue,documents:me}),Ve={user:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},ze=[He.a],Me=Object(Je.createStore)(We,Ve,Object(Ke.composeWithDevTools)(Je.applyMiddleware.apply(void 0,ze)));i.a.render(Object(P.jsx)(d.a,{store:Me,children:Object(P.jsx)(qe,{})}),document.getElementById("root"))},91:function(e,t,n){},92:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.9a6dbbd5.chunk.js.map